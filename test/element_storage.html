<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Prototype Playground - element_storage.js test file</title>
    <link rel="stylesheet" href="stylesheets/test.css" type="text/css" />
    <script src="../lib/prototype.js" type="text/javascript"></script>
    <script src="../lib/unittest.js" type="text/javascript"></script>
    <script src="../src/element_storage.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="testlog"></div>
    
    <div id="element1"></div>
    <div id="element2"></div>
    
    <script type="text/javascript">
      new Test.Unit.Runner({
        testStorage: function() {
          this.assertEqual(1, Prototype.StorageUID);
          
          var string = "Nice string";
          Element.store('element1', 'string', string);
          this.assertEqual(2, Prototype.StorageUID);
          
          var enumerable = {height: '100px', width: '200px;'};
          $('element1').store('enumerable', enumerable);
          this.assertEqual(2, Prototype.StorageUID);
          
          var enumerable2 = Object.extend(enumerable, {'float': 'left'});
          $('element2').store('enumerable', enumerable2);
          this.assertEqual(3, Prototype.StorageUID);
          
          this.assertEqual(string, $('element1').retrieve('string'));
          this.assertEqual(enumerable, $('element1').retrieve('enumerable'));
          this.assertEqual(enumerable2, $('element2').retrieve('enumerable'));
        },
        testDefaultValue: function() {
          this.assertEqual('ok', $('element1').retrieve('test', 'ok'));
          this.assertEqual('ok', $('element1').retrieve('test'));
        },
        testRetrieve: function() {
          this.assertNull($('element1').retrieve('none_existing_property'));
        }
      });
    </script>
  </body>
</html>